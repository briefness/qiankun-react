{"ast":null,"code":"\"use strict\";\n/* eslint import/no-mutable-exports: 'off' */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar utils_1 = require(\"./utils\");\n\nvar cache_1 = require(\"./cache\");\n\nvar eventNameSpace = 'event';\n\nvar Event =\n/** @class */\nfunction () {\n  function Event() {\n    this.eventEmitter = {};\n  }\n\n  Event.prototype.emit = function (key) {\n    var args = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      args[_i - 1] = arguments[_i];\n    }\n\n    var keyEmitter = this.eventEmitter[key];\n\n    if (!utils_1.isArray(keyEmitter) || utils_1.isArray(keyEmitter) && keyEmitter.length === 0) {\n      utils_1.warn(\"event.emit: no callback is called for \" + key);\n      return;\n    }\n\n    keyEmitter.forEach(function (cb) {\n      cb.apply(void 0, args);\n    });\n  };\n\n  Event.prototype.on = function (key, callback) {\n    if (typeof key !== 'string') {\n      utils_1.warn('event.on: key should be string');\n      return;\n    }\n\n    if (callback === undefined || typeof callback !== 'function') {\n      utils_1.warn('event.on: callback is required, should be function');\n      return;\n    }\n\n    if (!this.eventEmitter[key]) {\n      this.eventEmitter[key] = [];\n    }\n\n    this.eventEmitter[key].push(callback);\n  };\n\n  Event.prototype.off = function (key, callback) {\n    if (typeof key !== 'string') {\n      utils_1.warn('event.off: key should be string');\n      return;\n    }\n\n    if (!utils_1.isArray(this.eventEmitter[key])) {\n      utils_1.warn(\"event.off: \" + key + \" has no callback\");\n      return;\n    }\n\n    if (callback === undefined) {\n      this.eventEmitter[key] = undefined;\n      return;\n    }\n\n    this.eventEmitter[key] = this.eventEmitter[key].filter(function (cb) {\n      return cb !== callback;\n    });\n  };\n\n  Event.prototype.has = function (key) {\n    var keyEmitter = this.eventEmitter[key];\n    return utils_1.isArray(keyEmitter) && keyEmitter.length > 0;\n  };\n\n  return Event;\n}();\n\nvar event = cache_1.getCache(eventNameSpace);\n\nif (!event) {\n  event = new Event();\n  cache_1.setCache(eventNameSpace, event);\n}\n\nexports.default = event;","map":{"version":3,"sources":["../src/event.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n/* eslint import/no-mutable-exports: 'off' */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar cache_1 = require(\"./cache\");\nvar eventNameSpace = 'event';\nvar Event = /** @class */ (function () {\n    function Event() {\n        this.eventEmitter = {};\n    }\n    Event.prototype.emit = function (key) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var keyEmitter = this.eventEmitter[key];\n        if (!utils_1.isArray(keyEmitter) || (utils_1.isArray(keyEmitter) && keyEmitter.length === 0)) {\n            utils_1.warn(\"event.emit: no callback is called for \" + key);\n            return;\n        }\n        keyEmitter.forEach(function (cb) {\n            cb.apply(void 0, args);\n        });\n    };\n    Event.prototype.on = function (key, callback) {\n        if (typeof key !== 'string') {\n            utils_1.warn('event.on: key should be string');\n            return;\n        }\n        if (callback === undefined || typeof callback !== 'function') {\n            utils_1.warn('event.on: callback is required, should be function');\n            return;\n        }\n        if (!this.eventEmitter[key]) {\n            this.eventEmitter[key] = [];\n        }\n        this.eventEmitter[key].push(callback);\n    };\n    Event.prototype.off = function (key, callback) {\n        if (typeof key !== 'string') {\n            utils_1.warn('event.off: key should be string');\n            return;\n        }\n        if (!utils_1.isArray(this.eventEmitter[key])) {\n            utils_1.warn(\"event.off: \" + key + \" has no callback\");\n            return;\n        }\n        if (callback === undefined) {\n            this.eventEmitter[key] = undefined;\n            return;\n        }\n        this.eventEmitter[key] = this.eventEmitter[key].filter(function (cb) { return cb !== callback; });\n    };\n    Event.prototype.has = function (key) {\n        var keyEmitter = this.eventEmitter[key];\n        return utils_1.isArray(keyEmitter) && keyEmitter.length > 0;\n    };\n    return Event;\n}());\nvar event = cache_1.getCache(eventNameSpace);\nif (!event) {\n    event = new Event();\n    cache_1.setCache(eventNameSpace, event);\n}\nexports.default = event;\n//# sourceMappingURL=event.js.map"]},"metadata":{},"sourceType":"script"}