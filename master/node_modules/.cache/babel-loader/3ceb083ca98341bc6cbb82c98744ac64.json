{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n/**\n * @author Kuitos\n * @since 2019-04-11\n */\n\nimport { SandBoxType } from '../../interfaces';\nimport * as css from './css';\nimport { patchLooseSandbox, patchStrictSandbox } from './dynamicAppend';\nimport patchHistoryListener from './historyListener';\nimport patchInterval from './interval';\nimport patchWindowListener from './windowListener';\nexport function patchAtMounting(appName, elementGetter, sandbox, scopedCSS, excludeAssetFilter) {\n  var _patchersInSandbox;\n\n  var _a;\n\n  var basePatchers = [function () {\n    return patchInterval(sandbox.proxy);\n  }, function () {\n    return patchWindowListener(sandbox.proxy);\n  }, function () {\n    return patchHistoryListener();\n  }];\n  var patchersInSandbox = (_patchersInSandbox = {}, _defineProperty(_patchersInSandbox, SandBoxType.LegacyProxy, [].concat(basePatchers, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox.proxy, true, scopedCSS, excludeAssetFilter);\n  }])), _defineProperty(_patchersInSandbox, SandBoxType.Proxy, [].concat(basePatchers, [function () {\n    return patchStrictSandbox(appName, elementGetter, sandbox.proxy, true, scopedCSS, excludeAssetFilter);\n  }])), _defineProperty(_patchersInSandbox, SandBoxType.Snapshot, [].concat(basePatchers, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox.proxy, true, scopedCSS, excludeAssetFilter);\n  }])), _patchersInSandbox);\n  return (_a = patchersInSandbox[sandbox.type]) === null || _a === void 0 ? void 0 : _a.map(function (patch) {\n    return patch();\n  });\n}\nexport function patchAtBootstrapping(appName, elementGetter, sandbox, scopedCSS, excludeAssetFilter) {\n  var _patchersInSandbox2;\n\n  var _a;\n\n  var patchersInSandbox = (_patchersInSandbox2 = {}, _defineProperty(_patchersInSandbox2, SandBoxType.LegacyProxy, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox.proxy, false, scopedCSS, excludeAssetFilter);\n  }]), _defineProperty(_patchersInSandbox2, SandBoxType.Proxy, [function () {\n    return patchStrictSandbox(appName, elementGetter, sandbox.proxy, false, scopedCSS, excludeAssetFilter);\n  }]), _defineProperty(_patchersInSandbox2, SandBoxType.Snapshot, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox.proxy, false, scopedCSS, excludeAssetFilter);\n  }]), _patchersInSandbox2);\n  return (_a = patchersInSandbox[sandbox.type]) === null || _a === void 0 ? void 0 : _a.map(function (patch) {\n    return patch();\n  });\n}\nexport { css };","map":{"version":3,"sources":["/Users/mory/Desktop/qiankun-react/master/node_modules/qiankun/es/sandbox/patchers/index.js"],"names":["_defineProperty","SandBoxType","css","patchLooseSandbox","patchStrictSandbox","patchHistoryListener","patchInterval","patchWindowListener","patchAtMounting","appName","elementGetter","sandbox","scopedCSS","excludeAssetFilter","_patchersInSandbox","_a","basePatchers","proxy","patchersInSandbox","LegacyProxy","concat","Proxy","Snapshot","type","map","patch","patchAtBootstrapping","_patchersInSandbox2"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\n/**\n * @author Kuitos\n * @since 2019-04-11\n */\nimport { SandBoxType } from '../../interfaces';\nimport * as css from './css';\nimport { patchLooseSandbox, patchStrictSandbox } from './dynamicAppend';\nimport patchHistoryListener from './historyListener';\nimport patchInterval from './interval';\nimport patchWindowListener from './windowListener';\nexport function patchAtMounting(appName, elementGetter, sandbox, scopedCSS, excludeAssetFilter) {\n  var _patchersInSandbox;\n\n  var _a;\n\n  var basePatchers = [function () {\n    return patchInterval(sandbox.proxy);\n  }, function () {\n    return patchWindowListener(sandbox.proxy);\n  }, function () {\n    return patchHistoryListener();\n  }];\n  var patchersInSandbox = (_patchersInSandbox = {}, _defineProperty(_patchersInSandbox, SandBoxType.LegacyProxy, [].concat(basePatchers, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox.proxy, true, scopedCSS, excludeAssetFilter);\n  }])), _defineProperty(_patchersInSandbox, SandBoxType.Proxy, [].concat(basePatchers, [function () {\n    return patchStrictSandbox(appName, elementGetter, sandbox.proxy, true, scopedCSS, excludeAssetFilter);\n  }])), _defineProperty(_patchersInSandbox, SandBoxType.Snapshot, [].concat(basePatchers, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox.proxy, true, scopedCSS, excludeAssetFilter);\n  }])), _patchersInSandbox);\n  return (_a = patchersInSandbox[sandbox.type]) === null || _a === void 0 ? void 0 : _a.map(function (patch) {\n    return patch();\n  });\n}\nexport function patchAtBootstrapping(appName, elementGetter, sandbox, scopedCSS, excludeAssetFilter) {\n  var _patchersInSandbox2;\n\n  var _a;\n\n  var patchersInSandbox = (_patchersInSandbox2 = {}, _defineProperty(_patchersInSandbox2, SandBoxType.LegacyProxy, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox.proxy, false, scopedCSS, excludeAssetFilter);\n  }]), _defineProperty(_patchersInSandbox2, SandBoxType.Proxy, [function () {\n    return patchStrictSandbox(appName, elementGetter, sandbox.proxy, false, scopedCSS, excludeAssetFilter);\n  }]), _defineProperty(_patchersInSandbox2, SandBoxType.Snapshot, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox.proxy, false, scopedCSS, excludeAssetFilter);\n  }]), _patchersInSandbox2);\n  return (_a = patchersInSandbox[sandbox.type]) === null || _a === void 0 ? void 0 : _a.map(function (patch) {\n    return patch();\n  });\n}\nexport { css };"]},"metadata":{},"sourceType":"module"}