{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/mory/Desktop/qiankun-react/master/src/index.js\";\n\n/*\n * @Author: your name\n * @Date: 2021-01-12 10:42:07\n * @LastEditTime: 2021-01-27 14:08:18\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: /webpack-test/Users/mory/Desktop/qiankun-react/src/index.js\n */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App'; // import * as serviceWorker from './serviceWorker';\n\nimport { registerMicroApps, start } from 'qiankun';\nimport { setDefaultMountApp } from './utils';\nimport { initGlobalState } from './utils/globalState';\n\nfunction render({\n  appContent,\n  loading\n}) {\n  const container = document.getElementById('root');\n  ReactDOM.render( /*#__PURE__*/_jsxDEV(App, {\n    loading: loading,\n    content: appContent\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 19\n  }, this), container);\n}\n/**\n * Step1 初始化应用（可选）\n */\n\n\nrender({\n  loading: true\n});\n\nfunction genActiveRule(routerPrefix) {\n  return location => location.pathname.startsWith(routerPrefix);\n}\n/**\n * Step2 注册子应用\n * entry： 为微应用的访问地址\n */\n\n\nregisterMicroApps([{\n  name: 'react1',\n  entry: '//localhost:6651',\n  render,\n  activeRule: genActiveRule('/react1')\n}, {\n  name: 'react2',\n  entry: '//localhost:6652',\n  render,\n  activeRule: genActiveRule('/react2')\n}]);\nconst {\n  onGlobalStateChange,\n  setGlobalState\n} = initGlobalState({\n  user: 'qiankun'\n});\nonGlobalStateChange((value, prev) => console.log('[onGlobalStateChange - master]:', value, prev));\nsetGlobalState({\n  ignore: 'master',\n  user: {\n    name: 'master'\n  }\n});\n/**\n * Step3 设置默认进入的子应用\n */\n\nsetDefaultMountApp('/react1');\n/**\n * Step4 启动应用\n */\n\nstart(); // serviceWorker.unregister();","map":{"version":3,"sources":["/Users/mory/Desktop/qiankun-react/master/src/index.js"],"names":["React","ReactDOM","App","registerMicroApps","start","setDefaultMountApp","initGlobalState","render","appContent","loading","container","document","getElementById","genActiveRule","routerPrefix","location","pathname","startsWith","name","entry","activeRule","onGlobalStateChange","setGlobalState","user","value","prev","console","log","ignore"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAO,aAAP;AACA,OAAOC,GAAP,MAAgB,OAAhB,C,CACA;;AACA,SAASC,iBAAT,EAA4BC,KAA5B,QAAyC,SAAzC;AAEA,SAASC,kBAAT,QAAmC,SAAnC;AAEA,SAASC,eAAT,QAAgC,qBAAhC;;AAEA,SAASC,MAAT,CAAgB;AAAEC,EAAAA,UAAF;AAAcC,EAAAA;AAAd,CAAhB,EAAyC;AACvC,QAAMC,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAlB;AACAX,EAAAA,QAAQ,CAACM,MAAT,eAAgB,QAAC,GAAD;AAAK,IAAA,OAAO,EAAEE,OAAd;AAAuB,IAAA,OAAO,EAAED;AAAhC;AAAA;AAAA;AAAA;AAAA,UAAhB,EAAgEE,SAAhE;AACD;AAED;AACA;AACA;;;AACAH,MAAM,CAAC;AAAEE,EAAAA,OAAO,EAAE;AAAX,CAAD,CAAN;;AAEA,SAASI,aAAT,CAAuBC,YAAvB,EAAqC;AACnC,SAAOC,QAAQ,IAAIA,QAAQ,CAACC,QAAT,CAAkBC,UAAlB,CAA6BH,YAA7B,CAAnB;AACD;AAED;AACA;AACA;AACA;;;AACAX,iBAAiB,CAAC,CAChB;AACEe,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,KAAK,EAAE,kBAFT;AAGEZ,EAAAA,MAHF;AAIEa,EAAAA,UAAU,EAAEP,aAAa,CAAC,SAAD;AAJ3B,CADgB,EAOhB;AACEK,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,KAAK,EAAE,kBAFT;AAGEZ,EAAAA,MAHF;AAIEa,EAAAA,UAAU,EAAEP,aAAa,CAAC,SAAD;AAJ3B,CAPgB,CAAD,CAAjB;AAeA,MAAM;AAAEQ,EAAAA,mBAAF;AAAuBC,EAAAA;AAAvB,IAA0ChB,eAAe,CAAC;AAC9DiB,EAAAA,IAAI,EAAE;AADwD,CAAD,CAA/D;AAIAF,mBAAmB,CAAC,CAACG,KAAD,EAAQC,IAAR,KAAiBC,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+CH,KAA/C,EAAsDC,IAAtD,CAAlB,CAAnB;AAEAH,cAAc,CAAC;AACbM,EAAAA,MAAM,EAAE,QADK;AAEbL,EAAAA,IAAI,EAAE;AACJL,IAAAA,IAAI,EAAE;AADF;AAFO,CAAD,CAAd;AAOA;AACA;AACA;;AACAb,kBAAkB,CAAC,SAAD,CAAlB;AAEA;AACA;AACA;;AACAD,KAAK,G,CAGL","sourcesContent":["/*\n * @Author: your name\n * @Date: 2021-01-12 10:42:07\n * @LastEditTime: 2021-01-27 14:08:18\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: /webpack-test/Users/mory/Desktop/qiankun-react/src/index.js\n */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import * as serviceWorker from './serviceWorker';\nimport { registerMicroApps, start } from 'qiankun';\n\nimport { setDefaultMountApp } from './utils';\n\nimport { initGlobalState } from './utils/globalState';\n\nfunction render({ appContent, loading }) {\n  const container = document.getElementById('root');\n  ReactDOM.render(<App loading={loading} content={appContent} />, container);\n}\n\n/**\n * Step1 初始化应用（可选）\n */\nrender({ loading: true });\n\nfunction genActiveRule(routerPrefix) {\n  return location => location.pathname.startsWith(routerPrefix);\n}\n\n/**\n * Step2 注册子应用\n * entry： 为微应用的访问地址\n */\nregisterMicroApps([\n  {\n    name: 'react1',\n    entry: '//localhost:6651',\n    render,\n    activeRule: genActiveRule('/react1')\n  },\n  {\n    name: 'react2',\n    entry: '//localhost:6652',\n    render,\n    activeRule: genActiveRule('/react2') \n  },\n]);\n\nconst { onGlobalStateChange, setGlobalState } = initGlobalState({\n  user: 'qiankun',\n});\n\nonGlobalStateChange((value, prev) => console.log('[onGlobalStateChange - master]:', value, prev));\n\nsetGlobalState({\n  ignore: 'master',\n  user: {\n    name: 'master',\n  },\n});\n\n/**\n * Step3 设置默认进入的子应用\n */\nsetDefaultMountApp('/react1');\n\n/**\n * Step4 启动应用\n */\nstart();\n\n\n// serviceWorker.unregister();"]},"metadata":{},"sourceType":"module"}